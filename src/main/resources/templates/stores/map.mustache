{{>layouts/header}}

<form class="container">
        <div class="mb-3" style="text-align: center;background-color: #f5f5f5;color: black;padding:20px">
            <h2>{{site}} 지도</h2>
        </div>
    <div id="map" style="width:100%;height:600px;"></div>
    
    <script>
        var HOME_PATH = window.HOME_PATH || '.';

        var cityhall = new naver.maps.LatLng(37.566535, 126.9779692),
            map = new naver.maps.Map('map', {
                center: cityhall,
                zoom: 12
            }),
            markers = [],
            infoWindows = [];
            

        {{#storeList}}
        restaurant = new naver.maps.LatLng({{latitude}}, {{longitude}}),
            marker = new naver.maps.Marker({
                map: map,
                position: restaurant
            });
        
        var contentString = [
                '<div class="iw_inner" style="border-radius: 15px">',
                '   <div style="width:250px;text-align:center;">',
                '              <h4><h4>{{name}}</h4>',
                '                 <hr style="margin:5px 20px 1px 20px;background-color: green;"/>',
                '   </div>',
                '   <div style="width:250px;padding:3px 5px;">',
                '   <p fontsize=2>',
                '      &nbsp;<i class="fa-solid fa-location-dot fa-xs"></i> &nbsp; {{location}}<br>',
                '      &nbsp;<i class="fa-solid fa-phone fa-xs"></i> &nbsp; {{phone}}<br>',
                '      &nbsp;<i class="fa-solid fa-star fa-xs"></i> &nbsp; {{type}}</a>',
                '   </div>',
                '   </p>',
                '</div>'
            ].join('');

        var infowindow = new naver.maps.InfoWindow({
            content: contentString,
            Width: 5,
            backgroundColor: "#FFFAFA",
            borderColor: "#17594A",
            borderWidth: 5,
            anchorSize: new naver.maps.Size(20, 20),
            anchorSkew: true,
            anchorColor: "#FFFAFA",
            pixelOffset: new naver.maps.Point(20, -20)
        });

        markers.push(marker);
        infoWindows.push(infowindow);



        {{/storeList}}


        function getClickHandler(seq) {
            return function(e) {
                var marker = markers[seq],
                    infoWindow = infoWindows[seq];
        
                if (infoWindow.getMap()) {
                    infoWindow.close();
                } else {
                    infoWindow.open(map, marker);
                }
            }
        }
        for (var i=0, ii=markers.length; i<ii; i++) {
            naver.maps.Event.addListener(markers[i], 'click', getClickHandler(i));
        }
    </script>
</form>    

{{>layouts/footer}}